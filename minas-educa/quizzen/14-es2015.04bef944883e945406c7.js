(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"nIz/":function(n,l,u){"use strict";u.r(l);var t=u("8Y7J");class i{}var e=u("pMnS"),o=u("oBZk"),r=u("ZZ/e"),s=u("s7LF"),a=u("SVse"),b=u("mrSG");class c{constructor(n,l,u,t){this.statement=n,this.options=l,this.quiz=u,this._id=t}static fromData(n){return new this(n.statement,n.options,n.quiz,n._id)}}var d=u("pFfs"),g=u("IheW");let h=(()=>{class n extends d.a{constructor(n){super("/questions","question",n)}}return n.ngInjectableDef=t.Yb({factory:function(){return new n(t.Zb(g.c))},token:n,providedIn:"root"}),n})();var p=u("3Nn5"),m=u("UQLx"),v=u("wc7r"),f=u("5K9U");class C{constructor(n,l,u,t,i,e,o,r,a){this.alertController=n,this.cameraUtils=l,this.fileUpload=u,this.formBuilder=t,this.navCtrl=i,this.platform=e,this.questionService=o,this.quizService=r,this.router=a,this.nWrongOptions=new s.c(3,[s.o.required,s.o.min(3),s.o.max(9)]),this.questionsData=[],this.slideOpts={},this.wrongQuestionNamePrefix="wrong_question_",this.slides=[],this.wrongOptionsCounter=[],this.initializeQuestionForm(0);const b=this.router.getCurrentNavigation().extras.state;b&&(this.quiz=b.quiz,this.bgImg=b.bgImg,this.totalQuestions=b.n_questions),this.alertController.create({header:"Confirmar cria\xe7\xe3o do Quiz?",buttons:[{text:"Sim",handler:()=>{this.createQuestions(),this.navCtrl.navigateRoot("/quizzes")}},{text:"N\xe3o",role:"cancel"}]}).then(n=>this.alert=n)}ngOnInit(){this.createQuestionsSlides(1)}initializeQuestionForm(n){this.questionsData[n]=this.formBuilder.group({statement:["",s.o.required],answer:["",s.o.required],options:this.formBuilder.group({})}),this.wrongOptionsCounter[n]=0}createQuestionsSlides(n){this.slides=Object(v.a)(n)}setWrongOptions(n,l){let u=n-this.wrongOptionsCounter[l];if(0!==u){const n=u>0;u<0&&(u*=-1),[...Array(u)].map(u=>{n?this.createWrongOption(l):this.removeWrongOption(l)})}}createWrongOption(n){this.questionsData[n].controls.options.addControl(this.wrongQuestionNamePrefix+this.wrongOptionsCounter[n],new s.c("",s.o.required)),this.wrongOptionsCounter[n]++}removeWrongOption(n){this.wrongOptionsCounter[n]--,this.questionsData[n].controls.options.removeControl(this.wrongQuestionNamePrefix+this.wrongOptionsCounter[n])}onConfirmWrongOptionsNumber(){this.nWrongOptions.valid&&this.slider.getActiveIndex().then(n=>this.setWrongOptions(this.nWrongOptions.value,n))}onConfirmQuestionData(){this.slider.getActiveIndex().then(n=>{n+1<this.totalQuestions?(this.initializeQuestionForm(n+1),this.createQuestionsSlides(n+2),setTimeout(()=>this.slider.slideNext(),50)):this.alert.present()})}createQuestions(){this.quiz.questions=[],this.questionsData.map((n,l)=>{const u=[{text:n.controls.answer.value,correct:!0},...Object.values(n.controls.options.value).map(n=>({text:n,correct:!1}))],t=new c(n.controls.statement.value,u);this.saveQuestion(t,l+1===this.questionsData.length)})}saveQuestion(n,l){this.questionService.create(n).subscribe(n=>{this.quiz.questions.push(n._id),l&&this.saveQuiz()})}saveQuiz(){return b.b(this,void 0,void 0,(function*(){this.bgImg.isFromLocalStorage?(this.quiz.bg_img_path=yield this.fileUpload.upload(this.bgImg.fullPath()),this.cameraUtils.deleteImg(this.bgImg)):this.quiz.bg_img_path=this.bgImg.webFullPath,this.quizService.create(this.quiz).subscribe(n=>{console.log(n)})}))}}var N=u("iInd"),q=t.zb({encapsulation:0,styles:[["ion-slides[_ngcontent-%COMP%]   ion-slide[_ngcontent-%COMP%]{display:block}"]],data:{}});function A(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,13,"ion-item",[],null,null,null,o.db,o.t)),t.Ab(1,49152,null,0,r.G,[t.j,t.p,t.F],null,null),(n()(),t.Bb(2,0,null,0,2,"ion-label",[["color","secondary"],["position","stacked"]],null,null,null,o.eb,o.u)),t.Ab(3,49152,null,0,r.M,[t.j,t.p,t.F],{color:[0,"color"],position:[1,"position"]},null),(n()(),t.Tb(4,0,["Resposta Incorreta n\xba ",""])),(n()(),t.Bb(5,0,null,0,8,"ion-textarea",[["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,u){var i=!0;return"ionBlur"===l&&(i=!1!==t.Nb(n,8)._handleBlurEvent(u.target)&&i),"ionChange"===l&&(i=!1!==t.Nb(n,8)._handleInputEvent(u.target)&&i),i}),o.rb,o.H)),t.Ab(6,16384,null,0,s.n,[],{required:[0,"required"]},null),t.Qb(1024,null,s.h,(function(n){return[n]}),[s.n]),t.Ab(8,16384,null,0,r.Ob,[t.p],null,null),t.Qb(1024,null,s.i,(function(n){return[n]}),[r.Ob]),t.Ab(10,671744,null,0,s.e,[[3,s.a],[6,s.h],[8,null],[6,s.i],[2,s.r]],{name:[0,"name"]},null),t.Qb(2048,null,s.j,null,[s.e]),t.Ab(12,16384,null,0,s.k,[[4,s.j]],null,null),t.Ab(13,49152,null,0,r.xb,[t.j,t.p,t.F],{required:[0,"required"]},null)],(function(n,l){n(l,3,0,"secondary","stacked"),n(l,6,0,""),n(l,10,0,l.context.$implicit.key),n(l,13,0,"")}),(function(n,l){n(l,4,0,l.context.index+1),n(l,5,0,t.Nb(l,6).required?"":null,t.Nb(l,12).ngClassUntouched,t.Nb(l,12).ngClassTouched,t.Nb(l,12).ngClassPristine,t.Nb(l,12).ngClassDirty,t.Nb(l,12).ngClassValid,t.Nb(l,12).ngClassInvalid,t.Nb(l,12).ngClassPending)}))}function B(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,63,"ion-slide",[],null,null,null,o.ob,o.E)),t.Ab(1,49152,null,0,r.pb,[t.j,t.p,t.F],null,null),(n()(),t.Bb(2,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),t.Tb(3,null,["Quest\xe3o n\xba ",""])),(n()(),t.Bb(4,0,null,0,59,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,u){var i=!0;return"submit"===l&&(i=!1!==t.Nb(n,6).onSubmit(u)&&i),"reset"===l&&(i=!1!==t.Nb(n,6).onReset()&&i),i}),null,null)),t.Ab(5,16384,null,0,s.s,[],null,null),t.Ab(6,540672,null,0,s.f,[[8,null],[8,null]],{form:[0,"form"]},null),t.Qb(2048,null,s.a,null,[s.f]),t.Ab(8,16384,null,0,s.l,[[4,s.a]],null,null),(n()(),t.Bb(9,0,null,null,13,"ion-item",[["class","ion-margin-vertical"]],null,null,null,o.db,o.t)),t.Ab(10,49152,null,0,r.G,[t.j,t.p,t.F],null,null),(n()(),t.Bb(11,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,o.eb,o.u)),t.Ab(12,49152,null,0,r.M,[t.j,t.p,t.F],{position:[0,"position"]},null),(n()(),t.Tb(-1,0,["Pergunta da Quest\xe3o"])),(n()(),t.Bb(14,0,null,0,8,"ion-input",[["formControlName","statement"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,u){var i=!0;return"ionBlur"===l&&(i=!1!==t.Nb(n,17)._handleBlurEvent(u.target)&&i),"ionChange"===l&&(i=!1!==t.Nb(n,17)._handleInputEvent(u.target)&&i),i}),o.cb,o.s)),t.Ab(15,16384,null,0,s.n,[],{required:[0,"required"]},null),t.Qb(1024,null,s.h,(function(n){return[n]}),[s.n]),t.Ab(17,16384,null,0,r.Ob,[t.p],null,null),t.Qb(1024,null,s.i,(function(n){return[n]}),[r.Ob]),t.Ab(19,671744,null,0,s.e,[[3,s.a],[6,s.h],[8,null],[6,s.i],[2,s.r]],{name:[0,"name"]},null),t.Qb(2048,null,s.j,null,[s.e]),t.Ab(21,16384,null,0,s.k,[[4,s.j]],null,null),t.Ab(22,49152,null,0,r.F,[t.j,t.p,t.F],{required:[0,"required"]},null),(n()(),t.Bb(23,0,null,null,13,"ion-item",[["class","ion-margin-vertical"]],null,null,null,o.db,o.t)),t.Ab(24,49152,null,0,r.G,[t.j,t.p,t.F],null,null),(n()(),t.Bb(25,0,null,0,2,"ion-label",[["position","stacked"]],null,null,null,o.eb,o.u)),t.Ab(26,49152,null,0,r.M,[t.j,t.p,t.F],{position:[0,"position"]},null),(n()(),t.Tb(-1,0,["N\xfamero de Alternativas Erradas"])),(n()(),t.Bb(28,0,null,0,8,"ion-input",[["required",""],["type","number"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,u){var i=!0;return"ionBlur"===l&&(i=!1!==t.Nb(n,31)._handleBlurEvent(u.target)&&i),"ionChange"===l&&(i=!1!==t.Nb(n,31)._handleIonChange(u.target)&&i),i}),o.cb,o.s)),t.Ab(29,16384,null,0,s.n,[],{required:[0,"required"]},null),t.Qb(1024,null,s.h,(function(n){return[n]}),[s.n]),t.Ab(31,16384,null,0,r.Ib,[t.p],null,null),t.Qb(1024,null,s.i,(function(n){return[n]}),[r.Ib]),t.Ab(33,540672,null,0,s.d,[[6,s.h],[8,null],[6,s.i],[2,s.r]],{form:[0,"form"]},null),t.Qb(2048,null,s.j,null,[s.d]),t.Ab(35,16384,null,0,s.k,[[4,s.j]],null,null),t.Ab(36,49152,null,0,r.F,[t.j,t.p,t.F],{required:[0,"required"],type:[1,"type"]},null),(n()(),t.Bb(37,0,null,null,2,"ion-button",[["class","ion-margin-vertical mar-l-25 mar-r-25"],["fill","outline"]],null,[[null,"click"]],(function(n,l,u){var t=!0;return"click"===l&&(t=!1!==n.component.onConfirmWrongOptionsNumber()&&t),t}),o.N,o.d)),t.Ab(38,49152,null,0,r.j,[t.j,t.p,t.F],{fill:[0,"fill"]},null),(n()(),t.Tb(-1,0,[" Gerar Alternativas "])),(n()(),t.Bb(40,0,null,null,23,"ion-list",[],null,null,null,o.fb,o.v)),t.Ab(41,49152,null,0,r.N,[t.j,t.p,t.F],null,null),(n()(),t.Bb(42,0,null,0,13,"ion-item",[],null,null,null,o.db,o.t)),t.Ab(43,49152,null,0,r.G,[t.j,t.p,t.F],null,null),(n()(),t.Bb(44,0,null,0,2,"ion-label",[["color","secondary"],["position","stacked"]],null,null,null,o.eb,o.u)),t.Ab(45,49152,null,0,r.M,[t.j,t.p,t.F],{color:[0,"color"],position:[1,"position"]},null),(n()(),t.Tb(-1,0,["Resposta Correta"])),(n()(),t.Bb(47,0,null,0,8,"ion-textarea",[["formControlName","answer"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(n,l,u){var i=!0;return"ionBlur"===l&&(i=!1!==t.Nb(n,50)._handleBlurEvent(u.target)&&i),"ionChange"===l&&(i=!1!==t.Nb(n,50)._handleInputEvent(u.target)&&i),i}),o.rb,o.H)),t.Ab(48,16384,null,0,s.n,[],{required:[0,"required"]},null),t.Qb(1024,null,s.h,(function(n){return[n]}),[s.n]),t.Ab(50,16384,null,0,r.Ob,[t.p],null,null),t.Qb(1024,null,s.i,(function(n){return[n]}),[r.Ob]),t.Ab(52,671744,null,0,s.e,[[3,s.a],[6,s.h],[8,null],[6,s.i],[2,s.r]],{name:[0,"name"]},null),t.Qb(2048,null,s.j,null,[s.e]),t.Ab(54,16384,null,0,s.k,[[4,s.j]],null,null),t.Ab(55,49152,null,0,r.xb,[t.j,t.p,t.F],{required:[0,"required"]},null),(n()(),t.Bb(56,0,null,0,7,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,u){var i=!0;return"submit"===l&&(i=!1!==t.Nb(n,58).onSubmit(u)&&i),"reset"===l&&(i=!1!==t.Nb(n,58).onReset()&&i),i}),null,null)),t.Ab(57,16384,null,0,s.s,[],null,null),t.Ab(58,540672,null,0,s.f,[[8,null],[8,null]],{form:[0,"form"]},null),t.Qb(2048,null,s.a,null,[s.f]),t.Ab(60,16384,null,0,s.l,[[4,s.a]],null,null),(n()(),t.qb(16777216,null,null,2,null,A)),t.Ab(62,278528,null,0,a.i,[t.W,t.S,t.x],{ngForOf:[0,"ngForOf"]},null),t.Ob(0,a.e,[t.y])],(function(n,l){var u=l.component;n(l,6,0,u.questionsData[l.context.$implicit]),n(l,12,0,"stacked"),n(l,15,0,""),n(l,19,0,"statement"),n(l,22,0,""),n(l,26,0,"stacked"),n(l,29,0,""),n(l,33,0,u.nWrongOptions),n(l,36,0,"","number"),n(l,38,0,"outline"),n(l,45,0,"secondary","stacked"),n(l,48,0,""),n(l,52,0,"answer"),n(l,55,0,""),n(l,58,0,u.questionsData[l.context.$implicit].controls.options),n(l,62,0,t.Ub(l,62,0,t.Nb(l,63).transform(u.questionsData[l.context.$implicit].controls.options.controls)))}),(function(n,l){n(l,3,0,l.context.$implicit+1),n(l,4,0,t.Nb(l,8).ngClassUntouched,t.Nb(l,8).ngClassTouched,t.Nb(l,8).ngClassPristine,t.Nb(l,8).ngClassDirty,t.Nb(l,8).ngClassValid,t.Nb(l,8).ngClassInvalid,t.Nb(l,8).ngClassPending),n(l,14,0,t.Nb(l,15).required?"":null,t.Nb(l,21).ngClassUntouched,t.Nb(l,21).ngClassTouched,t.Nb(l,21).ngClassPristine,t.Nb(l,21).ngClassDirty,t.Nb(l,21).ngClassValid,t.Nb(l,21).ngClassInvalid,t.Nb(l,21).ngClassPending),n(l,28,0,t.Nb(l,29).required?"":null,t.Nb(l,35).ngClassUntouched,t.Nb(l,35).ngClassTouched,t.Nb(l,35).ngClassPristine,t.Nb(l,35).ngClassDirty,t.Nb(l,35).ngClassValid,t.Nb(l,35).ngClassInvalid,t.Nb(l,35).ngClassPending),n(l,47,0,t.Nb(l,48).required?"":null,t.Nb(l,54).ngClassUntouched,t.Nb(l,54).ngClassTouched,t.Nb(l,54).ngClassPristine,t.Nb(l,54).ngClassDirty,t.Nb(l,54).ngClassValid,t.Nb(l,54).ngClassInvalid,t.Nb(l,54).ngClassPending),n(l,56,0,t.Nb(l,60).ngClassUntouched,t.Nb(l,60).ngClassTouched,t.Nb(l,60).ngClassPristine,t.Nb(l,60).ngClassDirty,t.Nb(l,60).ngClassValid,t.Nb(l,60).ngClassInvalid,t.Nb(l,60).ngClassPending)}))}function F(n){return t.Vb(0,[t.Rb(671088640,1,{slider:0}),(n()(),t.Bb(1,0,null,null,11,"ion-header",[],null,null,null,o.ab,o.q)),t.Ab(2,49152,null,0,r.A,[t.j,t.p,t.F],null,null),(n()(),t.Bb(3,0,null,0,9,"ion-toolbar",[["color","primary"]],null,null,null,o.tb,o.J)),t.Ab(4,49152,null,0,r.Bb,[t.j,t.p,t.F],{color:[0,"color"]},null),(n()(),t.Bb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,o.O,o.e)),t.Ab(6,49152,null,0,r.k,[t.j,t.p,t.F],null,null),(n()(),t.Bb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(n,l,u){var i=!0;return"click"===l&&(i=!1!==t.Nb(n,9).onClick(u)&&i),i}),o.L,o.b)),t.Ab(8,49152,null,0,r.f,[t.j,t.p,t.F],null,null),t.Ab(9,16384,null,0,r.g,[[2,r.hb],r.Hb],null,null),(n()(),t.Bb(10,0,null,0,2,"ion-title",[],null,null,null,o.sb,o.I)),t.Ab(11,49152,null,0,r.zb,[t.j,t.p,t.F],null,null),(n()(),t.Tb(-1,0,["Cria\xe7\xe3o de Quiz"])),(n()(),t.Bb(13,0,null,null,11,"ion-content",[["class","ion-padding"]],null,null,null,o.V,o.l)),t.Ab(14,49152,null,0,r.t,[t.j,t.p,t.F],null,null),(n()(),t.Bb(15,0,null,0,3,"ion-slides",[["class","pad-b-15"],["pager","true"]],null,null,null,o.pb,o.F)),t.Ab(16,49152,[[1,4],["slider",4]],0,r.qb,[t.j,t.p,t.F],{options:[0,"options"],pager:[1,"pager"]},null),(n()(),t.qb(16777216,null,0,1,null,B)),t.Ab(18,278528,null,0,a.i,[t.W,t.S,t.x],{ngForOf:[0,"ngForOf"]},null),(n()(),t.Bb(19,0,null,0,5,"ion-fab",[["class","ion-margin"],["horizontal","end"],["slot","fixed"],["vertical","bottom"]],null,null,null,o.Y,o.m)),t.Ab(20,49152,null,0,r.v,[t.j,t.p,t.F],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),t.Bb(21,0,null,0,3,"ion-fab-button",[],null,[[null,"click"]],(function(n,l,u){var t=!0;return"click"===l&&(t=!1!==n.component.onConfirmQuestionData()&&t),t}),o.W,o.n)),t.Ab(22,49152,null,0,r.w,[t.j,t.p,t.F],null,null),(n()(),t.Bb(23,0,null,0,1,"ion-icon",[["name","checkmark"]],null,null,null,o.bb,o.r)),t.Ab(24,49152,null,0,r.B,[t.j,t.p,t.F],{name:[0,"name"]},null)],(function(n,l){var u=l.component;n(l,4,0,"primary"),n(l,16,0,u.slideOpts,"true"),n(l,18,0,u.slides),n(l,20,0,"end","bottom"),n(l,24,0,"checkmark")}),null)}function Q(n){return t.Vb(0,[(n()(),t.Bb(0,0,null,null,1,"app-create-quiz",[],null,null,null,F,q)),t.Ab(1,114688,null,0,C,[r.a,m.a,f.a,s.b,r.Hb,r.Jb,h,p.a,N.m],null,null)],(function(n,l){n(l,1,0)}),null)}var j=t.xb("app-create-quiz",C,Q,{},{},[]);class O{}u.d(l,"CreateQuizPageModuleNgFactory",(function(){return k}));var k=t.yb(i,[],(function(n){return t.Kb([t.Lb(512,t.m,t.jb,[[8,[e.a,j]],[3,t.m],t.D]),t.Lb(4608,a.l,a.k,[t.z,[2,a.v]]),t.Lb(4608,s.b,s.b,[]),t.Lb(4608,s.q,s.q,[]),t.Lb(4608,r.b,r.b,[t.F,t.g]),t.Lb(4608,r.Gb,r.Gb,[r.b,t.m,t.w]),t.Lb(4608,r.Kb,r.Kb,[r.b,t.m,t.w]),t.Lb(1073742336,a.b,a.b,[]),t.Lb(1073742336,s.p,s.p,[]),t.Lb(1073742336,s.m,s.m,[]),t.Lb(1073742336,r.Db,r.Db,[]),t.Lb(1073742336,N.o,N.o,[[2,N.t],[2,N.m]]),t.Lb(1073742336,O,O,[]),t.Lb(1073742336,i,i,[]),t.Lb(1024,N.k,(function(){return[[{path:"",component:C}]]}),[])])}))}}]);