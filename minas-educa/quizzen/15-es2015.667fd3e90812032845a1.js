(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{G26R:function(n,l,t){"use strict";t.r(l);var o=t("8Y7J");class i{}var e=t("pMnS"),u=t("oBZk"),s=t("ZZ/e"),r=t("SVse"),a=t("mrSG"),c=t("3Nn5"),b=t("pn+4"),d=t("izWX"),p=t("wc7r"),h=function(n){return n[n.JUST_SELECTED=0]="JUST_SELECTED",n[n.RIGHT_OPTION=1]="RIGHT_OPTION",n[n.WRONG_OPTION=2]="WRONG_OPTION",n}({});class m{constructor(n,l,t,o){this.route=n,this.navCtrl=l,this.quizService=t,this.viewUtils=o,this.questions=[],this.lastBttClicked=void 0,this.answers=[],this.TIME_BEFORE_NEXT_QUESTION=1500,this.buttonsColors=[],this.actualTheme=window.matchMedia("(prefers-color-scheme: light)")?"light":"dark",this.quiz=d.a.empty();const i=this.route.snapshot.paramMap.get("id");this.quizService.getById(i).subscribe(n=>{this.quiz=d.a.fromData(n),this.quiz.questions.map(n=>{Object(p.b)(n.options)}),this.questions=this.quiz.questions,this.questions.map((n,l)=>{this.buttonsColors[l]=[],n.options.map((n,t)=>{this.buttonsColors[l][t]=this.actualTheme})})})}ngOnInit(){}onOptionSelected(n,l){this.lastBttClicked={questionIndex:n,optionIndex:l},this.answers[n]=this.isCorrectOption(n,l),this.buttonsColors.map((n,l)=>n.map((n,t)=>{this.buttonsColors[l][t]=this.actualTheme})),this.updateButtonColor(n,l,h.JUST_SELECTED)}isCorrectOption(n,l){return this.questions[n].options[l].correct}updateButtonColor(n,l,t){let o=this.actualTheme;switch(t){case h.JUST_SELECTED:o="warning";break;case h.RIGHT_OPTION:o="success";break;case h.WRONG_OPTION:o="danger"}this.buttonsColors[n][l]=o}sliderLoaded(){return a.b(this,void 0,void 0,(function*(){this.slider.lockSwipes(!0),1===(yield this.slider.length())&&(this.slider.pager=!1)}))}onConfirmSelectedOption(){return a.b(this,void 0,void 0,(function*(){if(this.lastBttClicked){this.showQuestionResult();const n=yield this.slider.isEnd();setTimeout(()=>{n?this.finishQuiz():(this.slider.lockSwipes(!1),this.slider.slideNext(),this.slider.lockSwipes(!0))},this.TIME_BEFORE_NEXT_QUESTION)}else this.onNoOptionSelected()}))}showQuestionResult(){this.isCorrectOption(this.lastBttClicked.questionIndex,this.lastBttClicked.optionIndex)?this.onRightChoiceConfirmed():this.onWrongChoiceConfirmed()}onRightChoiceConfirmed(){this.updateButtonColor(this.lastBttClicked.questionIndex,this.lastBttClicked.optionIndex,h.RIGHT_OPTION),this.playCorrectChoiceAnimation()}onWrongChoiceConfirmed(){const n=this.lastBttClicked.questionIndex;this.updateButtonColor(n,this.lastBttClicked.optionIndex,h.WRONG_OPTION),this.questions[n].options.map((l,t)=>{l.correct&&this.updateButtonColor(n,t,h.RIGHT_OPTION)})}onNoOptionSelected(){this.viewUtils.presentToast("Por favor, selecione uma op\xe7\xe3o antes de Confirmar")}playCorrectChoiceAnimation(){}finishQuiz(){this.navCtrl.navigateForward("/quiz/results",{state:{quiz:this.quiz,answers:this.answers}})}}var C=t("iInd"),f=o.zb({encapsulation:0,styles:[["ion-button[_ngcontent-%COMP%]{font-size:.8em;white-space:pre-wrap;word-wrap:break-word}ion-slides[_ngcontent-%COMP%]{min-height:100%}.image-background[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:center;background-attachment:fixed;background-size:cover}.question-container[_ngcontent-%COMP%]{width:90%}"]],data:{}});function O(n){return o.Ub(0,[(n()(),o.Bb(0,0,null,null,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.onOptionSelected(n.parent.context.index,n.context.index)&&o),o}),u.L,u.d)),o.Ab(1,49152,null,0,s.j,[o.j,o.p,o.F],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),o.Sb(2,0,[" "," "]))],(function(n,l){n(l,1,0,l.component.buttonsColors[l.parent.context.index][l.context.index],"block")}),(function(n,l){n(l,2,0,l.context.$implicit.text)}))}function g(n){return o.Ub(0,[(n()(),o.Bb(0,0,null,null,23,"ion-slide",[["class","ion-padding"]],null,null,null,u.kb,u.C)),o.Ab(1,49152,null,0,s.pb,[o.j,o.p,o.F],null,null),(n()(),o.Bb(2,0,null,0,21,"div",[["class","question-container"]],null,null,null,null,null)),(n()(),o.Bb(3,0,null,null,6,"ion-card",[["class","statement"],["color","primary"]],null,null,null,u.R,u.f)),o.Ab(4,49152,null,0,s.l,[o.j,o.p,o.F],{color:[0,"color"]},null),(n()(),o.Bb(5,0,null,0,4,"ion-card-header",[],null,null,null,u.O,u.h)),o.Ab(6,49152,null,0,s.n,[o.j,o.p,o.F],null,null),(n()(),o.Bb(7,0,null,0,2,"ion-card-title",[],null,null,null,u.Q,u.j)),o.Ab(8,49152,null,0,s.p,[o.j,o.p,o.F],null,null),(n()(),o.Sb(9,0,["",""])),(n()(),o.Bb(10,0,null,null,10,"ion-card",[["class","options"],["color","primary"]],null,null,null,u.R,u.f)),o.Ab(11,49152,null,0,s.l,[o.j,o.p,o.F],{color:[0,"color"]},null),(n()(),o.Bb(12,0,null,0,4,"ion-card-header",[],null,null,null,u.O,u.h)),o.Ab(13,49152,null,0,s.n,[o.j,o.p,o.F],null,null),(n()(),o.Bb(14,0,null,0,2,"ion-card-title",[],null,null,null,u.Q,u.j)),o.Ab(15,49152,null,0,s.p,[o.j,o.p,o.F],null,null),(n()(),o.Sb(-1,0,[" Escolha a alternativa correta: "])),(n()(),o.Bb(17,0,null,0,3,"ion-card-content",[],null,null,null,u.N,u.g)),o.Ab(18,49152,null,0,s.m,[o.j,o.p,o.F],null,null),(n()(),o.qb(16777216,null,0,1,null,O)),o.Ab(20,278528,null,0,r.i,[o.W,o.S,o.x],{ngForOf:[0,"ngForOf"]},null),(n()(),o.Bb(21,0,null,null,2,"ion-button",[["class","ion-margin-top"],["color","secondary"],["expand","full"]],null,[[null,"click"]],(function(n,l,t){var o=!0;return"click"===l&&(o=!1!==n.component.onConfirmSelectedOption()&&o),o}),u.L,u.d)),o.Ab(22,49152,null,0,s.j,[o.j,o.p,o.F],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),o.Sb(-1,0,["Confirmar"]))],(function(n,l){n(l,4,0,"primary"),n(l,11,0,"primary"),n(l,20,0,l.context.$implicit.options),n(l,22,0,"secondary","full")}),(function(n,l){n(l,9,0,l.context.$implicit.statement)}))}function B(n){return o.Ub(0,[(n()(),o.Bb(0,0,null,null,3,"ion-slides",[["class","image-background"],["pager","true"]],null,[[null,"ionSlidesDidLoad"]],(function(n,l,t){var o=!0;return"ionSlidesDidLoad"===l&&(o=!1!==n.component.sliderLoaded()&&o),o}),u.lb,u.D)),o.Ab(1,49152,[[1,4],["slider",4]],0,s.qb,[o.j,o.p,o.F],{pager:[0,"pager"]},null),(n()(),o.qb(16777216,null,0,1,null,g)),o.Ab(3,278528,null,0,r.i,[o.W,o.S,o.x],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,1,0,"true"),n(l,3,0,t.questions)}),null)}function q(n){return o.Ub(0,[o.Qb(671088640,1,{slider:0}),(n()(),o.Bb(1,0,null,null,9,"ion-header",[],null,null,null,u.Y,u.q)),o.Ab(2,49152,null,0,s.A,[o.j,o.p,o.F],null,null),(n()(),o.Bb(3,0,null,0,7,"ion-toolbar",[["color","primary"]],null,null,null,u.pb,u.H)),o.Ab(4,49152,null,0,s.Bb,[o.j,o.p,o.F],{color:[0,"color"]},null),(n()(),o.Bb(5,0,null,0,2,"ion-title",[],null,null,null,u.ob,u.G)),o.Ab(6,49152,null,0,s.zb,[o.j,o.p,o.F],null,null),(n()(),o.Sb(7,0,[""," - ",""])),(n()(),o.Bb(8,0,null,0,2,"ion-title",[["slot","end"]],null,null,null,u.ob,u.G)),o.Ab(9,49152,null,0,s.zb,[o.j,o.p,o.F],null,null),(n()(),o.Sb(10,0,["","\xb0 ano"])),(n()(),o.Bb(11,0,null,null,3,"ion-content",[],null,null,null,u.T,u.l)),o.Ab(12,49152,null,0,s.t,[o.j,o.p,o.F],null,null),(n()(),o.qb(16777216,null,0,1,null,B)),o.Ab(14,16384,null,0,r.j,[o.W,o.S],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,4,0,"primary"),n(l,14,0,t.quiz)}),(function(n,l){var t=l.component;n(l,7,0,t.quiz.subject,t.quiz.name),n(l,10,0,t.quiz.school_year)}))}function S(n){return o.Ub(0,[(n()(),o.Bb(0,0,null,null,1,"app-play-quiz",[],null,null,null,q,f)),o.Ab(1,114688,null,0,m,[C.a,s.Hb,c.a,b.a],null,null)],(function(n,l){n(l,1,0)}),null)}var T=o.xb("app-play-quiz",m,S,{},{},[]),k=t("s7LF");class w{}t.d(l,"PlayQuizPageModuleNgFactory",(function(){return x}));var x=o.yb(i,[],(function(n){return o.Kb([o.Lb(512,o.m,o.jb,[[8,[e.a,T]],[3,o.m],o.D]),o.Lb(4608,r.l,r.k,[o.z,[2,r.s]]),o.Lb(4608,k.q,k.q,[]),o.Lb(4608,s.b,s.b,[o.F,o.g]),o.Lb(4608,s.Gb,s.Gb,[s.b,o.m,o.w]),o.Lb(4608,s.Kb,s.Kb,[s.b,o.m,o.w]),o.Lb(1073742336,r.b,r.b,[]),o.Lb(1073742336,k.p,k.p,[]),o.Lb(1073742336,k.g,k.g,[]),o.Lb(1073742336,s.Db,s.Db,[]),o.Lb(1073742336,C.o,C.o,[[2,C.t],[2,C.m]]),o.Lb(1073742336,w,w,[]),o.Lb(1073742336,i,i,[]),o.Lb(1024,C.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);